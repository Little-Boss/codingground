/* package whatever; // don't place package name! */

import java.util.*;
import java.util.Scanner;
import java.lang.*;
import java.io.*;

/* Name of the class has to be "Main" only if the class is public. */
class Cipher
{
	private String myKeyText, myMessageText;
	private String[] myKey, myMessage;
	private String myUpperCase = "ABCDEFGHIJKLMNOPQRSTUVWXYZ ,.<>?'\":;`1234567890-=~!@#$%^&*()_+";
	
	public Cipher( String keyText, String messageText )
	{
		//stores inputs in original form
		myKeyText = keyText;
		myMessageText = messageText;
		
		//Changes inputs to upper case
		keyText = keyText.toUpperCase();
		messageText = messageText.toUpperCase();
		
		//initalizes arrays of key and message to desired length
		myKey = new String[messageText.length()];
		myMessage = new String[messageText.length()];
		
		//makes key an array of strings
		int cycleKey = 0;
		for( int i = 0; i < messageText.length(); i++ )
		{
			if( cycleKey == keyText.length() )
			{
				cycleKey = 0;
			}
			myKey[i] = keyText.substring( cycleKey, cycleKey + 1 );
			cycleKey++;
		}
		
		//makes message an array of strings
		for( int i = 0; i < messageText.length(); i++ )
		{
			myMessage[i] = messageText.substring( i, i + 1 );
		}
	}
	
	//returns the key and message entered
	public String getText()
	{
		return "Key: " + myKeyText + "\nMessage: " + myMessageText;
	}
	
	//returns the arrays of key and message as a string
	public String getArrays()
	{
		String result = "Key:\n";
		for( String letter : myKey )
		{
			result += letter + " ";
		}
		
		result += "\nMessage:\n";
		for( String letter : myMessage )
		{
			result += letter + " ";
		}
		
		return result;
	}
	
	//this is the ciphering method
	public String processMessage()
	{
		String crypticMessage = "";
        for( int i = 0; i < myMessage.length; i++ )
        {
            if( myUpperCase.indexOf(myMessage[i]) > myUpperCase.indexOf(myKey[i]) )
            {
                int position = myUpperCase.length() - (myUpperCase.indexOf(myMessage[i]) - myUpperCase.indexOf(myKey[i]) );
                crypticMessage += myUpperCase.substring( position, position + 1 );
            }else
            if( myUpperCase.indexOf(myMessage[i]) <= myUpperCase.indexOf(myKey[i]) )
            {
                int position = myUpperCase.indexOf(myKey[i]) - myUpperCase.indexOf(myMessage[i]);
                crypticMessage += myUpperCase.substring( position, position + 1 );
            }
        }
        
        return crypticMessage;
	}
}

public class Main
{
	public static void main (String[] args) throws java.lang.Exception
	{
		//initializes my thingy things
		String upperCase = "ABCDEFGHIJKLMNOPQRSTUVWXYZ ,.<>?'\":;`1234567890-=~!@#$%^&*()_+";
		Scanner scanner = new Scanner(System.in);
		String key = "";
		String message = "";
		String name = "";
		String fixedName = "";
		String yesOrNo = "";
		
		//introduction
		System.out.println( "Today you will be using a cipher (this program is not cap-sensitive)\nA key is used to encode or decode a message\nYour ciphered message can be entered with the same key to output the original" );
		System.out.println( "P.S. You have so many character to choose from, so please don't get unreasonable on me!" );
		System.out.println( "\nWhat's your name?" );
		name = "miChAEl the awEsoMe";
		
		//fixes capitalization ("miChAEl the awEsoMe" evaluates to "Michael The Awesome")
		if( name.length() > 0 )
		{
			name = name.substring(0,1).toUpperCase() + name.substring(1);
			fixedName += name.substring(0,1);
			for( int i = 1; i < name.length(); i++ )
			{
				if( name.substring(i, i + 1).equals(" ") )
				{
					fixedName += name.substring(i, i + 2).toUpperCase();
					i++;
				}else
				{
					fixedName += name.substring(i, i + 1).toLowerCase();
				}
			}
		}
		
		System.out.println( "\nHello, " + fixedName + "! Would you like your name to be your key? (Yes or No)" );
		yesOrNo = "no";
		
		//sets key
		if( yesOrNo.toUpperCase().equals("YES") )
		{
			key = name;
		}else
		{
			System.out.print( "\nPlease enter your key\nKey: " );
			key = "BIGmike";
		}
		
		key = key.toUpperCase();
		String keyInvalids = "";
		boolean keyHasError = false;
		for( int i = 0; i < key.length(); i++ )
		{
			if( upperCase.indexOf(key.substring(i,i+1)) < 0 )
			{
				keyInvalids += "\"" + key.substring(i,i+1) + "\", ";
				keyHasError = true;
			}
		}
		if( keyHasError )
		{
			System.out.println( keyInvalids + "\nPlease use only the following: " + upperCase );
			key = "My bad, dude";
		}
			
		//sets message
		System.out.print( "\nPlease enter your message\nMessage: " );
		message = "It's getting kinda late";
		
		message = message.toUpperCase();
		String messageInvalids = "";
		boolean messageHasError = false;
		for( int i = 0; i < message.length(); i++ )
		{
			if( upperCase.indexOf(message.substring(i,i+1)) < 0 )
			{
				messageInvalids += "\"" + message.substring(i,i+1) + "\", ";
				messageHasError = true;
			}
		}
		if( messageHasError )
		{
			System.out.println( messageInvalids + "\nPlease use only the following: " + upperCase );
			message = "My bad, dude";
		}
		
		
		//initializes a Cipher class from user input
		Cipher wammo = new Cipher( key, message );
		//System.out.println( wammo.getArrays() );
		//System.out.println( wammo.getText() );
		System.out.println( "\n\nI present to you your ciphered message :D\n" + wammo.processMessage() );
	}
}
