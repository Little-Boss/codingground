/* package whatever; // don't place package name! */

import java.util.*;
import java.util.Scanner;
import java.lang.*;
import java.io.*;

/* Name of the class has to be "Main" only if the class is public. */
class Cipher
{
	private String myKeyText, myMessageText;
	private String[] myKey, myMessage;
	private String myUpperCase = "ABCDEFGHIJKLMNOPQRSTUVWXYZ ,.<>?'\":;`1234567890-=~!@#$%^&*()_+";
	
	public Cipher( String keyText, String messageText )
	{
		//stores inputs in original form
		myKeyText = keyText;
		myMessageText = messageText;
		
		//Changes inputs to upper case
		keyText = keyText.toUpperCase();
		messageText = messageText.toUpperCase();
		
		//initalizes arrays of key and message to desired length
		myKey = new String[messageText.length()];
		myMessage = new String[messageText.length()];
		
		//makes key an array of strings
		int cycleKey = 0;
		for( int i = 0; i < messageText.length(); i++ )
		{
			if( cycleKey == keyText.length() )
			{
				cycleKey = 0;
			}
			myKey[i] = keyText.substring( cycleKey, cycleKey + 1 );
			cycleKey++;
		}
		
		//makes message an array of strings
		for( int i = 0; i < messageText.length(); i++ )
		{
			myMessage[i] = messageText.substring( i, i + 1 );
		}
	}
	
	//returns the key and message entered
	public String getText()
	{
		return "Key: " + myKeyText + "\nMessage: " + myMessageText;
	}
	
	//returns the arrays of key and message as a string
	public String getArrays()
	{
		String result = "Key:\n";
		for( String letter : myKey )
		{
			result += letter + " ";
		}
		
		result += "\nMessage:\n";
		for( String letter : myMessage )
		{
			result += letter + " ";
		}
		
		return result;
	}
	
	//this is the ciphering method
	public String processMessage()
	{
		String crypticMessage = "";
        for( int i = 0; i < myMessage.length; i++ )
        {
            if( myUpperCase.indexOf(myMessage[i]) > myUpperCase.indexOf(myKey[i]) )
            {
                int position = myUpperCase.length() - (myUpperCase.indexOf(myMessage[i]) - myUpperCase.indexOf(myKey[i]) );
                crypticMessage += myUpperCase.substring( position, position + 1 );
            }else
            if( myUpperCase.indexOf(myMessage[i]) <= myUpperCase.indexOf(myKey[i]) )
            {
                int position = myUpperCase.indexOf(myKey[i]) - myUpperCase.indexOf(myMessage[i]);
                crypticMessage += myUpperCase.substring( position, position + 1 );
            }
        }
        
        return crypticMessage;
	}
}

public class Main
{
	public static void main (String[] args) throws java.lang.Exception
	{
		Scanner scanner = new Scanner(System.in);
		String key = "";
		String message = "";
		String name = "";
		String fixedName = "";
		String yesOrNo = "";
		
		System.out.println( "Today you will be using a cipher (this program is not cap-sensitive)\nA key is used to encode or decode a message\nYour ciphered message can be entered with the same key to output the original\n" );
		System.out.println( "What's your name?" );
		name = scanner.next();
		if( name.length() > 0 )
		{
			name = name.substring(0,1).toUpperCase() + name.substring(1);
			
			for( int i = 0; i < name.length(); i++ )
			{
				if( name.substring(i, i + 1).equals(" ") )
				{
					fixedName += name.substring(i, i + 2).toUpperCase();
					i++;
				}else
				{
					fixedName += name.substring(i, i + 1);
				}
			}
		}
		System.out.println( "\nHello, " + fixedName + "! Would you like your name to be your key? (Yes or No)" );
		yesOrNo = scanner.next();
		if( yesOrNo.toUpperCase().equals("YES") )
		{
			key = name;
		}else
		{
			System.out.print( "\nPlease enter your key\nKey: " );
			key = scanner.next();
		}
		System.out.print( "\nPlease enter your message\nMessage: " );
		message = scanner.next();
		Cipher wammo = new Cipher( key, message );
		//System.out.println( wammo.getArrays() );
		//System.out.println( wammo.getText() );
		System.out.println( "\n" + wammo.processMessage() );
	}
}
